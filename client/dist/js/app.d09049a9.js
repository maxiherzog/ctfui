(function(){"use strict";var e={2340:function(e,t,a){var l=a(9242),r=a(1095),n=a(3396);function i(e,t,a,l,r,i){const s=(0,n.up)("CTFUI");return(0,n.wg)(),(0,n.j4)(s)}a(5847);var s=a(7139);const u=(0,n._)("br",null,null,-1),o=(0,n._)("br",null,null,-1),c=(0,n._)("br",null,null,-1),f=(0,n._)("br",null,null,-1),d=(0,n._)("p",null,"Bist du sicher, dass du das Spiel neustarten willst?",-1),p=(0,n._)("label",{for:"flagAmount"},"Anzahl Flaggen",-1),m=(0,n._)("label",{for:"startingTickets"},"Starttickets pro Team",-1),h=(0,n._)("label",{for:"respawnTime"},"Respawnzeit",-1),g=(0,n._)("label",{for:"captureTime"},"Capturezeit",-1);function v(e,t,a,l,r,i){const v=(0,n.up)("BProgressBar"),w=(0,n.up)("BProgress"),_=(0,n.up)("BButton"),k=(0,n.up)("BBadge"),b=(0,n.up)("BFormInput"),y=(0,n.up)("BCollapse"),T=(0,n.up)("BModal"),C=(0,n.Q2)("b-toggle");return(0,n.wg)(),(0,n.iD)(n.HY,null,[(0,n.Wm)(w,{height:"80px"},{default:(0,n.w5)((()=>[(0,n.Wm)(v,{value:r.value_blue,max:100,variant:"primary"},{default:(0,n.w5)((()=>[(0,n._)("h1",null,"Blau "+(0,s.zw)(r.tickets[0]),1)])),_:1},8,["value"]),(0,n.Wm)(v,{value:r.value_red,max:100,variant:"danger"},{default:(0,n.w5)((()=>[(0,n._)("h1",null,"Rot "+(0,s.zw)(r.tickets[1]),1)])),_:1},8,["value"])])),_:1}),((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(r.flags,(e=>((0,n.wg)(),(0,n.iD)("div",{key:e.letter,class:(0,s.C_)({me:e.letter==r.my_flag,flag:!0})},[(0,n.Uk)((0,s.zw)(e.letter)+": "+(0,s.zw)(e.status)+" ",1),(0,n.Wm)(w,{class:"progress-flag",variant:e.status<0?"danger":"",value:Math.abs(e.status),width:"100%",animated:r.capturing},null,8,["variant","value","animated"])],2)))),128)),u,(0,n.Wm)(_,{variant:"danger",onClick:t[0]||(t[0]=e=>i.capture(-1))},{default:(0,n.w5)((()=>[(0,n.Uk)("Capture Red")])),_:1}),(0,n.Wm)(_,{variant:"primary",onClick:t[1]||(t[1]=e=>i.capture(1))},{default:(0,n.w5)((()=>[(0,n.Uk)("Capture Blue")])),_:1}),o,(0,n.Wm)(_,{onClick:i.respawn,disabled:r.capturing},{default:(0,n.w5)((()=>[(0,n.Uk)("Respawn")])),_:1},8,["onClick","disabled"]),((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(r.respawns,(e=>((0,n.wg)(),(0,n.j4)(k,{key:e.id,variant:"warning"},{default:(0,n.w5)((()=>[(0,n.Uk)((0,s.zw)(e.id)+": "+(0,s.zw)(e.time_left),1)])),_:2},1024)))),128)),c,(0,n.Wm)(_,{onClick:i.cycleFlag,disabled:r.capturing},{default:(0,n.w5)((()=>[(0,n.Uk)("Next flag")])),_:1},8,["onClick","disabled"]),f,(0,n.Wm)(_,{onClick:t[2]||(t[2]=e=>r.restartModal=!0)},{default:(0,n.w5)((()=>[(0,n.Uk)("Spiel neustarten")])),_:1}),(0,n.Wm)(T,{modelValue:this.restartModal,"onUpdate:modelValue":t[7]||(t[7]=e=>this.restartModal=e),title:"Restart",onOk:i.restartGame},{default:(0,n.w5)((()=>[d,(0,n.wy)(((0,n.wg)(),(0,n.j4)(_,{variant:"primary"},{default:(0,n.w5)((()=>[(0,n.Uk)("Einstellungen")])),_:1})),[[C,void 0,void 0,{"settings-collapse":!0}]]),(0,n.Wm)(y,{id:"settings-collapse"},{default:(0,n.w5)((()=>[p,(0,n.Wm)(b,{id:"flagAmount",type:"number",modelValue:r.form_flagAmount,"onUpdate:modelValue":t[3]||(t[3]=e=>r.form_flagAmount=e),min:"1",max:"8"},null,8,["modelValue"]),m,(0,n.Wm)(b,{id:"startingTickets",type:"number",modelValue:r.form_startingTickets,"onUpdate:modelValue":t[4]||(t[4]=e=>r.form_startingTickets=e),min:"1",max:"1000"},null,8,["modelValue"]),h,(0,n.Wm)(b,{id:"respawnTime",type:"number",modelValue:r.form_respawnTime,"onUpdate:modelValue":t[5]||(t[5]=e=>r.form_respawnTime=e),min:"1",max:"1000"},null,8,["modelValue"]),g,(0,n.Wm)(b,{id:"captureTime",type:"number",modelValue:r.form_captureTime,"onUpdate:modelValue":t[6]||(t[6]=e=>r.form_captureTime=e),min:"1",max:"1000"},null,8,["modelValue"])])),_:1})])),_:1},8,["modelValue","onOk"])],64)}a(560);var w=a(4488),_={name:"CTFUI",data(){return{socket:(0,w.ZP)("http://localhost:3000"),flags:null,my_flag:null,modal:!1,form_flagAmount:1,form_startingTickets:100,form_respawnTime:10,form_captureTime:10,respawnInterval:null,tickets:[100,100],value_blue:50,value_red:50,respawns:[],respawn_counter:0,capturing:!1,restartModal:!1}},created(){this.socket=(0,w.ZP)("http://localhost:3000",{withCredentials:!0,extraHeaders:{"ctf-header-jo":""}})},methods:{respawn(){var e=0;for(let t=0;t<this.flags.length;t++)this.flags[t].players.includes(this.socket.id)&&(e=this.flags[t].status);100!=e&&-100!=e||(this.respawns.push({id:this.respawn_counter,time_left:10}),this.respawn_counter++)},click(){this.socket.emit("click")},cycleFlag(){this.socket.emit("cycleFlag")},restartGame(){this.socket.emit("restart",this.rangeValue)},capture(e){this.respawns=[],this.capturing=!0;var t=0;for(let a=0;a<this.flags.length;a++)this.flags[a].players.includes(this.socket.id)&&(t=this.flags[a].status);this.socket.emit("capture",t),clearInterval(this.captureInterval),this.captureInterval=setInterval((()=>{t+=e,t>=100?(t=100,clearInterval(this.captureInterval),this.capturing=!1):t<=-100&&(t=-100,clearInterval(this.captureInterval),this.capturing=!1),this.socket.emit("capture",t)}),100)}},mounted(){this.socket.on("flags",(e=>{this.flags=e;for(let t=0;t<this.flags.length;t++)this.flags[t].players.includes(this.socket.id)&&(this.my_flag=this.flags[t].letter);this.$forceUpdate()})),this.socket.on("tickets",(e=>{console.log(e),this.tickets=e,this.value_blue=Math.round(e[0]/(e[0]+e[1])*100),this.value_red=Math.round(e[1]/(e[0]+e[1])*100)})),this.respawnInterval=setInterval((()=>{for(let e=0;e<this.respawns.length;e++)this.respawns[e].time_left-=1,this.respawns[e].time_left<=0&&(this.respawns.splice(e,1),this.socket.emit("subtractTicket")),this.$forceUpdate()}),1e3)}},k=a(89);const b=(0,k.Z)(_,[["render",v]]);var y=b,T={name:"App",components:{CTFUI:y}};const C=(0,k.Z)(T,[["render",i]]);var U=C;const V=(0,l.ri)(U);V.use(r.qq,{components:!0,directives:!0}),V.mount("#app")}},t={};function a(l){var r=t[l];if(void 0!==r)return r.exports;var n=t[l]={exports:{}};return e[l].call(n.exports,n,n.exports,a),n.exports}a.m=e,function(){var e=[];a.O=function(t,l,r,n){if(!l){var i=1/0;for(c=0;c<e.length;c++){l=e[c][0],r=e[c][1],n=e[c][2];for(var s=!0,u=0;u<l.length;u++)(!1&n||i>=n)&&Object.keys(a.O).every((function(e){return a.O[e](l[u])}))?l.splice(u--,1):(s=!1,n<i&&(i=n));if(s){e.splice(c--,1);var o=r();void 0!==o&&(t=o)}}return t}n=n||0;for(var c=e.length;c>0&&e[c-1][2]>n;c--)e[c]=e[c-1];e[c]=[l,r,n]}}(),function(){a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,{a:t}),t}}(),function(){a.d=function(e,t){for(var l in t)a.o(t,l)&&!a.o(e,l)&&Object.defineProperty(e,l,{enumerable:!0,get:t[l]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={143:0};a.O.j=function(t){return 0===e[t]};var t=function(t,l){var r,n,i=l[0],s=l[1],u=l[2],o=0;if(i.some((function(t){return 0!==e[t]}))){for(r in s)a.o(s,r)&&(a.m[r]=s[r]);if(u)var c=u(a)}for(t&&t(l);o<i.length;o++)n=i[o],a.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return a.O(c)},l=self["webpackChunkclient"]=self["webpackChunkclient"]||[];l.forEach(t.bind(null,0)),l.push=t.bind(null,l.push.bind(l))}();var l=a.O(void 0,[998],(function(){return a(2340)}));l=a.O(l)})();
//# sourceMappingURL=app.d09049a9.js.map